<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Data Visualisation Story</title>
    </head>

    <body>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="module" src="https://public.tableau.com/javascripts/api/tableau.embedding.3.latest.min.js"></script>

        <h1 style="font-family: Verdana, sans-serif; font-weight:100; margin-top: 30px; margin-left: 50px">How has the racing of Formula 1 changed over time?</h1>

        <p style="font-family: Verdana, sans-serif; font-weight:100; margin-left: 50px; margin-right: 50px">This page will explore how the racing in F1 has changed over time by investigating the periods of dominance from teams or drivers, exploring the variety of track locations and trying to explore how close the racing has been with every technological evolution.</p>

        <!-- Visualisation 1 -->
        <div id="wrapper1" style="display:flex; position:relative; flex-direction:column; margin-top: 20px; margin-bottom: 20px;">
            <h3 style="font-family: Verdana, sans-serif; font-weight:100; margin-left: 50px">Most Successful Drivers and Constructors Champions</h3>
            <h4 style="font-family: Verdana, sans-serif; font-weight:100; margin-left: 50px">Driver Championships Earnt Per Constructor and Per Era</h4>
            <div id="sankey_multiple1" style="width: 1800px; height: 900px; margin: auto;"></div>
        </div>

        <div id="wrapper2a" style="display:flex; position:relative;">
            <h4 style="font-family: Verdana, sans-serif; font-weight:100; margin-left: 50px">Constructor Championships Earnt Per Driver</h4>
            <h4 style="font-family: Verdana, sans-serif; font-weight:100; margin-left: 596px">Constructor Championships Earnt Per Era</h4>
        </div>

        <div id="wrapper2b" style="display:flex; position:relative; margin-top: 20px; margin-bottom: 40px;">
            <div id="sankey_multiple2" style="width: 850px; height: 900px; margin: auto;"></div>
            <div id="sankey_multiple3" style="width: 850px; height: 900px; margin: auto;"></div>
        </div>

        <h6 style="font-family: Verdana, sans-serif; margin-left: 50px;">Breakdown of Eras, Top Constructors and Top Drivers Champions:</h6>

        <div id="wrapper2c" style="display:flex; position:relative; margin-left: 50px; margin-bottom: 40px; font-family: Verdana, sans-serif;">
            <ul>
                <li>Turbo Hybrid V6s - 2014 to Present Day</li>
                <li>Hybrid V8s - 2006 to 2013</li>
                <li>V8s - 1995 to 2005</li>
                <li>V10s - 1989 to 1994</li>
                <li>Naturally Aspirated (NAs) - 1987 to 1988</li>
                <li>Sub Eras - 1966 to 1986</li>
                <li>Rear Engines - 1961 to 1965</li>
                <li>Mid Engines - 1958 to 1960</li>
                <li>Front Engines - 1950 to 1955</li>
            </ul>

            <ul>
                <li>Hamilton - 7</li>
                <li>Schumacher - 7</li>
                <li>Fangio - 5</li>
                <li>Vettel - 4</li>
                <li>Prost - 4</li>
            </ul>

            <ul>
                <li>Ferrari - 16</li>
                <li>Williams - 9</li>
                <li>McLaren - 8</li>
                <li>Mercedes - 8</li>
                <li>Lotus - 7</li>
            </ul>
        </div>

        <hr style="border-style: dotted; width: 1800px;">

        <p style="font-family: Verdana, sans-serif; font-weight:100; margin-left: 50px; margin-right: 50px">We can see how teams such as Ferrari have long dominated the sport, but how has this happened. Next we shall break down how, where and when points are scored throughout the history of F1 so you can see where their competition lies. For this visualisation, we have normalised the points over the years to give equal weight to all years. Click <a href="https://en.wikipedia.org/wiki/List_of_Formula_One_World_Championship_points_scoring_systems">here</a> to learn more.</p>

        <!-- Visualisation 2 -->
        <div id="wrapper3" style="display:flex; position:relative; margin-top: 40px; margin-bottom: 40px;">
            <tableau-viz id="visualisation2"
                         src='https://public.tableau.com/views/Visualisation2_16723148203520/Visualisation2?:language=en-GB&publish=yes&:display_count=n&:origin=viz_share_link'
                         height='1200' width='1800' toolbar='bottom' hide-tabs
                         style="margin: auto;">
            </tableau-viz>
        </div>

        <hr style="border-style: dotted; width: 1800px;">

        <!-- Visualisation 3 -->
        <div id="wrapper4" style="display:flex; position:relative; margin-top: 40px; margin-bottom: 40px;">
            <tableau-viz id="visualisation3"
                         src='https://public.tableau.com/views/Visualisation3_16723149238570/Visualisation3?:language=en-GB&publish=yes&:display_count=n&:origin=viz_share_link'
                         height='1000' width='1800' toolbar='bottom' hide-tabs
                         style="margin: auto;">
            </tableau-viz>
        </div>

        <hr style="border-style: dotted; width: 1800px;">

        <!-- Visualisation 4 -->
        <div id="wrapper5" style="display:flex; position:relative; margin-top: 40px; margin-bottom: 40px;">
            <tableau-viz id="visualisation5"
                         src='https://public.tableau.com/views/Visualisation4_16723150410210/Visualisation4?:language=en-GB&publish=yes&:display_count=n&:origin=viz_share_link'
                         height='1000' width='1800' toolbar='bottom' hide-tabs
                         style="margin: auto;">
            </tableau-viz>
        </div>

        <script type="text/javascript">
            google.charts.load("current", {packages:["sankey"]});
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {
                let data1 = new google.visualization.DataTable();
                data1.addColumn('string', 'From');
                data1.addColumn('string', 'To');
                data1.addColumn('number', 'Championships');
                data1.addRows([['Alfa Romeo','Farina',1],
                    ['Farina','Front Engines',1],
                    ['Alfa Romeo','Fangio',1],
                    ['Ferrari','Ascari',2],
                    ['Ascari','Front Engines',2],
                    ['Maserati','Fangio',2],
                    ['Mercedes','Fangio',1],
                    ['Fangio','Front Engines',5],
                    ['Ferrari','Fangio',1],
                    ['Ferrari','Hawthorn',1],
                    ['Hawthorn','Mid Engines',1],
                    ['Cooper-Climax','J Brabham',2],
                    ['J Brabham','Mid Engines',2],
                    ['Ferrari','Hill',1],
                    ['Hill','Rear Engines',2],
                    ['BRM','Hill',1],
                    ['Lotus-Climax','Clark',2],
                    ['Clark','Rear Engines',2],
                    ['Ferrari','Surtees',1],
                    ['Surtees','Rear Engines',1],
                    ['Brabham-Repco','J Brabham',1],
                    ['J Brabham','Sub Eras',1],
                    ['Brabham-Repco','Hulme',1],
                    ['Hulme','Sub Eras',1],
                    ['Lotus-Ford','Hill',1],
                    ['Hill','Sub Eras',1],
                    ['Matra-Ford','Stewart',1],
                    ['Team Lotus','Rindt',1],
                    ['Rindt','Sub Eras',1],
                    ['Tyrrell','Stewart',2],
                    ['Team Lotus','Fittipaldi',1],
                    ['Fittipaldi','Sub Eras',2],
                    ['Stewart','Sub Eras',3],
                    ['McLaren','Fittipaldi',1],
                    ['Ferrari','Lauda',2],
                    ['McLaren','Hunt',1],
                    ['Hunt','Sub Eras',1],
                    ['Team Lotus','Andretti',1],
                    ['Andretti','Sub Eras',1],
                    ['Ferrari','Scheckter',1],
                    ['Scheckter','Sub Eras',1],
                    ['Williams','Jones',1],
                    ['Jones','Sub Eras',1],
                    ['Brabham','Piquet',2],
                    ['Piquet','Sub Eras',2],
                    ['Williams','Rosberg',1],
                    ['Rosberg','Sub Eras',1],
                    ['McLaren','Lauda',1],
                    ['Lauda','Sub Eras',3],
                    ['Prost','Sub Eras',2],
                    ['Williams','Piquet',1],
                    ['Piquet','NAs',1],
                    ['Senna','NAs',1],
                    ['McLaren','Prost',3],
                    ['Prost','V10s',2],
                    ['Senna','V10s',2],
                    ['McLaren','Senna',3],
                    ['Williams','Mansell',1],
                    ['Mansell','V10s',1],
                    ['Williams','Prost',1],
                    ['Schumacher','V10s',1],
                    ['Benetton','Schumacher',2],
                    ['Williams','Hill',1],
                    ['Hill','V8s',1],
                    ['Williams','Villeneuve',1],
                    ['Villeneuve','V8s',1],
                    ['McLaren','Hakkinen',2],
                    ['Hakkinen','V8s',2],
                    ['Ferrari','Schumacher',5],
                    ['Schumacher','V8s',6],
                    ['Alonso','V8s',1],
                    ['Renault','Alonso',2],
                    ['Alonso','Hybrid V8s',1],
                    ['Ferrari','Raikkonen',1],
                    ['Raikkonen','Hybrid V8s',1],
                    ['McLaren','Hamilton',1],
                    ['Hamilton','Hybrid V8s',1],
                    ['Brawn','Button',1],
                    ['Button','Hybrid V8s',1],
                    ['Red Bull','Vettel',4],
                    ['Vettel','Hybrid V8s',4],
                    ['Mercedes','Rosberg',1],
                    ['Rosberg','Turbo Hybrid V6s',1],
                    ['Mercedes','Hamilton',6],
                    ['Hamilton','Turbo Hybrid V6s',6],
                    ['Red Bull','Verstappen',2],
                    ['Verstappen','Turbo Hybrid V6s',2]]);

                let data2 = new google.visualization.DataTable();
                data2.addColumn('string', 'From');
                data2.addColumn('string', 'To');
                data2.addColumn('number', 'Championships');
                data2.addRows([['Moss','Vanwall',1],
                    ['Brooks','Vanwall',1],
                    ['J Brabham','Cooper-Climax',1],
                    ['Trintignant','Cooper-Climax',2],
                    ['B McLaren','Cooper-Climax',1],
                    ['Ginther','Ferrari',1],
                    ['Hill','Ferrari',1],
                    ['Hill','BRM',1],
                    ['Ginther','BRM',1],
                    ['Taylor','Lotus-Climax',1],
                    ['Clark','Lotus-Climax',2],
                    ['Bandini','Ferrari',1],
                    ['Surtees','Ferrari',1],
                    ['Spence','Lotus-Climax',1],
                    ['J Brabham','Brabham-Repco',2],
                    ['Hulme','Brabham-Repco',2],
                    ['Clark','Lotus-Ford',1],
                    ['Hill','Lotus-Ford',1],
                    ['Stewart','Matra-Ford',1],
                    ['Beltoise','Matra-Ford',1],
                    ['Miles','Team Lotus',1],
                    ['Hill','Team Lotus',1],
                    ['Stewart','Tyrrell',1],
                    ['Cevert','Tyrrell',1],
                    ['Walker','Team Lotus',1],
                    ['Fittipaldi','Team Lotus',2],
                    ['Peterson','Team Lotus',2],
                    ['Hulme','McLaren',1],
                    ['Hailwood','McLaren',1],
                    ['Regazzoni','Ferrari',2],
                    ['Reutemann','Ferrari',1],
                    ['Lauda','Ferrari',3],
                    ['Andretti','Team Lotus',1],
                    ['Scheckter','Ferrari',1],
                    ['Villeneuve','Ferrari',2],
                    ['Jones','Williams',2],
                    ['Reutemann','Williams',2],
                    ['Pironi','Ferrari',1],
                    ['Tambay','Ferrari',1],
                    ['Arnoux','Ferrari',1],
                    ['Lauda','McLaren',2],
                    ['Prost','McLaren',4],
                    ['Piquet','Williams',2],
                    ['Senna','McLaren',4],
                    ['Berger','McLaren',2],
                    ['Patrese','Williams',1],
                    ['Mansell','Williams',3],
                    ['Prost','Williams',1],
                    ['Senna','Williams',1],
                    ['Schumacher','Benetton',1],
                    ['Herbert','Benetton',1],
                    ['Hill','Williams',3],
                    ['Villeneuve','Williams',2],
                    ['Frentzen','Williams',1],
                    ['Hakkinen','McLaren',1],
                    ['Coulthard','McLaren',1],
                    ['Irvine','Ferrari',1],
                    ['Barrichello','Ferrari',5],
                    ['Schumacher','Ferrari',6],
                    ['Fisichella','Renault',2],
                    ['Alonso','Renault',2],
                    ['Raikkonen','Ferrari',2],
                    ['Massa','Ferrari',2],
                    ['Button','Brawn',1],
                    ['Barrichello','Brawn',1],
                    ['Vettel','Red Bull',4],
                    ['Webber','Red Bull',4],
                    ['Hamilton','Mercedes',8],
                    ['Rosberg','Mercedes',3],
                    ['Bottas','Mercedes',5],
                    ['Perez','Red Bull',1],
                    ['Verstappen','Red Bull',1]]);

                let data3 = new google.visualization.DataTable();
                data3.addColumn('string', 'From');
                data3.addColumn('string', 'To');
                data3.addColumn('number', 'Championships');
                data3.addRows([['Vanwall','Mid Engines',1],
                    ['Cooper-Climax','Mid Engines',2],
                    ['Ferrari','Rear Engines',2],
                    ['BRM','Rear Engines',1],
                    ['Lotus-Climax','Rear Engines',2],
                    ['Brabham-Repco','Sub Eras',2],
                    ['Lotus-Ford','Sub Eras',1],
                    ['Matra-Ford','Sub Eras',1],
                    ['Team Lotus','Sub Eras',4],
                    ['Tyrrell','Sub Eras',1],
                    ['Ferrari','Sub Eras',6],
                    ['McLaren','Sub Eras',3],
                    ['Williams','Sub Eras',3],
                    ['Williams','NAs',1],
                    ['McLaren','NAs',1],
                    ['McLaren','V10s',3],
                    ['Williams','V10s',3],
                    ['Benetton','V8s',1],
                    ['Williams','V8s',2],
                    ['McLaren','V8s',1],
                    ['Ferrari','V8s',6],
                    ['Renault','V8s',1],
                    ['Renault','Hybrid V8s',1],
                    ['Ferrari','Hybrid V8s',2],
                    ['Brawn','Hybrid V8s',1],
                    ['Red Bull','Hybrid V8s',4],
                    ['Mercedes','Turbo Hybrid V6s',8],
                    ['Red Bull','Turbo Hybrid V6s',1]]);

                let colors1 = ['#900000', '#f6f0de', '#2B4562', '#4A1601', '#DC0000', '#327ba4', '#0C2340', '#00D2BE', '#203342', '#2B4562', '#000000', '#898478', '#212737', '#2B4562', '#FD7E3C', '#006F62', '#3f4f70', '#0a3fa0', '#C4883A', '#2B4562', '#8e95a2', '#EB2D3B', '#0068B9', '#916e28', '#D7C7AE', '#dcdfe8', '#0E3182', '#f82f27', '#FF8700', '#fd2a1f', '#0b0a10', '#b4b8cb', '#da9400', '#00A0DE', '#ebecee', '#071623', '#cf222c', '#d2d526', '#002c6a', '#2B4562', '#fab500', '#2B4562', '#b91101', '#F4471C', '#008860', '#2B4562', '#fe90b2', '#13155f', '#0076cc', '#FFF500', '#2B4562', '#004cfb', '#3F1B5C', '#B8FD6E', '#103afd', '#0600EF', '#f0eff4', '#2B4562', '#fb271f'];
                let colors2 = ['#D3D3D3', '#004225', '#D3D3D3', '#898478', '#000000', '#D3D3D3', '#D3D3D3', '#D3D3D3', '#DC0000', '#212737', '#FD7E3C', '#D3D3D3', '#006F62', '#3f4f70', '#D3D3D3', '#0a3fa0', '#D3D3D3', '#C4883A', '#8e95a2', '#EB2D3B', '#916e28', '#0068B9', '#D3D3D3', '#D3D3D3', '#D7C7AE', '#0E3182', '#D3D3D3', '#D3D3D3', '#f82f27', '#D3D3D3', '#FF8700', '#D3D3D3', '#D3D3D3', '#D3D3D3', '#fd2a1f', '#b4b8cb', '#da9400', '#fe90b2', '#ebecee', '#00A0DE', '#D3D3D3', '#D3D3D3', '#D3D3D3', '#002c6a', '#cf222c', '#fab500', '#D3D3D3', '#D3D3D3', '#b91101', '#F4471C', '#008860', '#D3D3D3', '#D3D3D3', '#13155f', '#D3D3D3', '#D3D3D3', '#D3D3D3', '#D3D3D3', '#FFF500', '#0076cc', '#004cfb', '#D3D3D3', '#103afd', '#B8FD6E', '#f0eff4', '#0600EF', '#D3D3D3', '#3F1B5C', '#00D2BE', '#d2d526', '#D3D3D3', '#D3D3D3', '#fb271f'];
                let colors3 = ['#004225', '#2B4562', '#000000', '#DC0000', '#2B4562', '#FD7E3C', '#006F62', '#C4883A', '#2B4562', '#EB2D3B', '#0068B9', '#D7C7AE', '#0E3182', '#FF8700', '#00A0DE', '#2B4562', '#2B4562', '#008860', '#2B4562', '#FFF500', '#2B4562', '#B8FD6E', '#0600EF', '#00D2BE', '#2B4562'];

                let options1 = {
                    sankey: {
                        node: {
                            colors: colors1,
                            label: { fontName: 'Verdana', fontSize: 12 },
                            width: 20,
                            nodePadding: 10,
                            interactivity: true
                        },
                        link: {
                            colorMode: 'gradient',
                            colors: colors1,
                            color: { stroke: 'black', strokeWidth: 0.1, fillOpacity: 0.8 }
                        }
                    }
                };

                let options2 = {
                    sankey: {
                        node: {
                            colors: colors2,
                            label: { fontName: 'Verdana', fontSize: 12 },
                            width: 20,
                            nodePadding: 10,
                            interactivity: true
                        },
                        link: {
                            colorMode: 'gradient',
                            colors: colors2,
                            color: { stroke: 'black', strokeWidth: 0.1, fillOpacity: 0.8 }
                        }
                    }
                };

                let options3 = {
                    sankey: {
                        node: {
                            colors: colors3,
                            label: { fontName: 'Verdana', fontSize: 12 },
                            width: 20,
                            nodePadding: 10,
                            interactivity: true
                        },
                        link: {
                            colorMode: 'gradient',
                            colors: colors3,
                            color: { stroke: 'black', strokeWidth: 0.1, fillOpacity: 0.8 }
                        }
                    }
                };

                let chartDiv1 = document.getElementById('sankey_multiple1');
                let chartDiv2 = document.getElementById('sankey_multiple2');
                let chartDiv3 = document.getElementById('sankey_multiple3');

                let chart1 = new google.visualization.Sankey(chartDiv1);
                let chart2 = new google.visualization.Sankey(chartDiv2);
                let chart3 = new google.visualization.Sankey(chartDiv3);

                let colorMap = {
                    'Ferrari': 'red',
                    'Red Bull': 'navy'
                };

                let sheet = window.document.styleSheets[0]

                let observer = new MutationObserver(function (mutations) {
                    mutations.forEach(function (mutation) {
                        mutation.addedNodes.forEach(function (node) {
                            if (node.tagName === 'text') {
                                sheet.insertRule('svg rect { fill: '+ colorMap[node.innerHTML] +'; }', sheet.cssRules.length);
                            }
                        });
                    });
                });
                observer.observe(chartDiv1, {
                    childList: true,
                    subtree: true
                });

                chart1.draw(data1, options1);
                chart2.draw(data2, options2);
                chart3.draw(data3, options3);
            }
        </script>
    </body>
</html>